@import "compass";
@import "bootstrap/functions";
@import "bootstrap/variables";
@import "variables";
@import "bootstrap/mixins";

@import "bootstrap/reboot";
@import "bootstrap/utilities/screenreaders";
@import "bootstrap/jumbotron";
@import "bootstrap/card";
@import "bootstrap/buttons";
@import "bootstrap/badge";
@import "bootstrap/breadcrumb";
@import "bootstrap/nav";
@import "bootstrap/pagination";
@import "bootstrap/tables";
@import "bootstrap/code";

@import "dracula";
@import "mixins";
@import "partials/header";
@import "partials/footer";
@import "partials/content";

@include establish-baseline;

html,
body {
  display: flex;
  flex-direction: column;
  min-height: 100%;
}

body {
  @include flex-grow(1);
}

h1, h2, h3, h4, h5, h6 {
  font-weight: $headings-font-weight;
}

h1, h2, h3, h4, h5, h6, p,
blockquote, figure, figcaption,
ul, ol, dl {
  margin-bottom: 0;
}

ul ul,
ul ol,
ul dl,
ol ul,
ol ol,
ol dl,
dl ul,
dl ol,
dl dl, {
  margin-bottom: 0;
}

h1 {
  text-align: center;
  margin-bottom: $base-line-height;
}

img {
  @include img-fluid;
  @include border-radius($thumbnail-border-radius);
}

.display-1 {
  font-size: $display1-size;
  font-weight: $display1-weight;
  @include adjust-font-size-to($display1-size);
}

.display-2 {
  font-size: $display2-size;
  font-weight: $display2-weight;
  @include adjust-font-size-to($display3-size);
}

.display-3 {
  font-size: $display3-size;
  font-weight: $display3-weight;
  @include adjust-font-size-to($display3-size);
}

.display-4 {
  font-size: $display4-size;
  font-weight: $display4-weight;
  @include adjust-font-size-to($display4-size);
}

.display-3 {
  margin-top: $base-line-height;
  @include single-text-shadow(3px, 3px, 3px);

  ~ p {
    font-weight: 500;
  }
}

.jumbotron {
  //@include debug-vertical-alignment("debug.png");
  @include flexbox((align-self: center, display: flex, flex-direction: column, flex-grow: 1));
  width: 100%;
  max-width: 64em;
  margin-bottom: 0;

  @include media-breakpoint-up(md) {
    padding-left: 2em;
    padding-right: 2em;
  }

  @include media-breakpoint-up(lg) {
    padding-left: 4em;
    padding-right: 4em;
  }
}

.breadcrumb {
  background-color: $bg-secondary;
  font-size: $h5-font-size;
  margin-bottom: $base-line-height + 1px;
  @include adjust-font-size-to($h5-font-size);
  
  h1 {
    display: inline;
    font-size: $h5-font-size;
  }
}

.page-link {
  @include text-truncate;

  small {
    color: $dark;
  }
}

[aria-label~="navigation"] {
  @include align-self(center);
  margin-top: auto;
}

[aria-label~="posts"] {
  @include flexbox((align-self: stretch, display: flex, justify-content: center));

  ul {
    @include flexbox((display:flex, flex-direction: column, max-width: 20em));
    @include media-breakpoint-up(sm) {
      @include flex-direction(row);
      max-width: 40em;
    };
    @include flex-grow(1);
  }

  li {
    @include media-breakpoint-up(sm) {
      width: 50%;
    };
  }
}

.fa-1x {
  width: 1em;
  height: 1em;
}

.fa-2x {
  width: 2em;
  height: 2em;
 }

.tags {
  list-style: none;
  padding-left: 1.375em;
  background-image: inline-image("tags.svg");
  background-size: 1.25em 1.25em;
  background-position: center left;
  background-repeat: no-repeat;

  li {
    display: inline-block;
  }
}

.date-published {
  font-size: 90%;
  text-align: right;
  @include adjust-font-size-to(90%);
}

%cover {
    padding: $thumbnail-padding;
    margin-bottom: 1px;
    background-color: $thumbnail-bg;
    border: 2px solid $gray-500;
    @include box-shadow($thumbnail-box-shadow);
}

.bookshelf {
  @include flexbox((display: flex, flex-wrap: wrap));
  @include trailer;
  @include media-breakpoint-up(se) {
    padding-left: 0.5rem;
    padding-right: 0.5rem;
  }

  @include media-breakpoint-up(sm) {
    padding-left: 1rem;
    padding-right: 1rem;
  }
}

.bookshelf-item {
  @include flexbox((display: flex, flex-direction: column,));
  margin-bottom: $base-line-height - $hr-border-width;
  border-bottom: $hr-border-width solid $hr-border-color; 

  @include make-col-ready(0.75em);
  @include make-col(6);

  @media (min-width: 375px) {
    @include make-col-ready(2em);
    padding-left: 1em;
    padding-right: 1em;
  }

  @include media-breakpoint-down(se) {
    &:nth-child(2n+1):nth-last-child(-n+2),
    &:nth-child(2n+1):nth-last-child(-n+2) ~ & {
      border-bottom: 0;
      @include trailer;
    }
  }

  @include media-breakpoint-only(sm) {
    @include make-col(4);
    
    &:nth-child(3n+1):nth-last-child(-n+3),
    &:nth-child(3n+1):nth-last-child(-n+3) ~ & {
      border-bottom: 0;
      @include trailer;
    }
  }

  @include media-breakpoint-up(md) {
    @include make-col(3);
    &:nth-child(4n+1):nth-last-child(-n+4),
    &:nth-child(4n+1):nth-last-child(-n+4) ~ & {
      border-bottom: 0;
      @include trailer;
    }
  }

  img {
    @extend %cover;
  }

  h2 {
    font-size: $h5-font-size;
    line-height: $base-line-height;
    @include flex-grow(1);
    margin: 0 0.25rem;

    @include media-breakpoint-down(xs) {
      margin: 0;
    }
  }

  h2 + a {
    order: -1;
  }

  .tags {
    margin-left: 0.5rem;
  }
}

.content {
  @include media-breakpoint-down(sm) {
    @include make-col(12);
  };
  @include media-breakpoint-up(sm) {
    @include make-col(11);
  };
  @include media-breakpoint-up(md) {
    @include make-col(10);
  };
  @include media-breakpoint-up(lg) {
    @include make-col(9);
  };
  @include align-self(center);
  width: 100%;
}

.archive {
  @include flexbox((display: flex, flex-direction: column));

  &:last-child {
    .excerpt {
      margin-bottom: $base-line-height;
      border-bottom: 0;
    }
  }

  h2 {
    font-size: $h3-font-size;
    @include adjust-font-size-to($h3-font-size);
    text-align: center;
    margin-bottom: 1px;
  }

  .tags {
    margin-left: 2em;
  }

  [data-archive-type="bookshelf"] {
    &:before {
      content: "《";
      color: $black;
    }

    &:after {
      content: "》";
      color: $black;
    }
  }
}



.book-aside {
  @include flexbox((
    align-self: stretch,
    display: flex,
    flex-wrap: wrap,
    justify-content: center,
    ));
  @include leader(2);

  h2 {
    text-align: center;
    @include adjust-font-size-to($h2-font-size);
    @include rhythm-padding(0);
  }

  section {
    @include flex-grow(1);
    max-width: 20rem;
  }

  ul {
    list-style: none;
    @include rhythm-padding(0.5);

    span {
      color: $text-muted
    }
  }

  p {
    @include trailer(0.5);
  }
}

.hackers {
  @include Scroll_Wrapper;
  margin-top: $base-line-height;
  padding-left: 1em;
  padding-right: 1em;

  h2 {
    @include adjust-font-size-to($h2-font-size);
    padding-left: 1rem;
    border-top: 1px solid $dark;
    margin-top: ($base-line-height / 2) - 1px;
    margin-bottom: $base-line-height / 2;
    text-align: left;
    font-weight: 400;
    @include single-text-shadow(2px, 2px, 2px);
  }

  article {
    display: inline-block;
    max-width: 8.5em;
    margin-left: 0.5em;
    margin-right: 0.5em;

    @include media-breakpoint-up(md) {
      @include make-col-ready(2em);
      @include make-col(3);
      margin-left: 0;
      margin-right: 0;
    }
  }

  h3 {
    @include text-hide($ignore-warning: true);
  }

  img {
    @extend %cover;
  }

  pre {
    margin-bottom: 0;
  }
}

