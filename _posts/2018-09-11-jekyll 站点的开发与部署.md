---
layout: post
title: Jekyll 站点的开发与部署
date: 2018-09-11 10:08:00 +0800
categories: 计算
tags: [jekyll]
---
在*Windows*环境下，*Jekyll*站点的环境配置与部署流程。

---

## Ruby安装

当将[Ruby](https://www.ruby-lang.org/zh_cn/)安装到：*D:\Program Files\Ruby\Ruby25-x64*时，由于路径名中包含有“空格”，这将导致安装[Jekyll](https://www.jekyll.com.cn/)时*make*失败，所以将*Ruby*改为：*D:\Languages\Ruby\Ruby25-x64*即可。

---

## Jekyll 安装

$`gem sources --add https://gems.ruby-china.com/ --remove https://rubygems.org/`

$`gem sources -l`

$`gem install jekyll bundler`

$`bundle config mirror.https://rubygems.org https://gems.ruby-china.com`

$`jekyll new brave1984.github.io`

$`cd brave1984.github.io`

$`bundle install`

$`bundle exec jekyll serve`

---

## Git 版本控制

$`git init`

$`git checkout -b develop`

$`git branch -d master`

$`git add remote origin https://github.com/brave1984/brave1984.github.io.git`

$`git add .`

$`git commit -m "first commit"`

$`git push origin develop`

$`bundle exec jekyll build`

$`cd _site`

$`git init`

$`git add remote origin https://github.com/brave1984/brave1984.github.io.git`

$`git add .`

$`git commit -m "first build"`

$`git push origin master`

---

## Travis CI

在[Travis CI](https://travis-ci.com/ "Travis CI")上配置GitHub账号。

$`vi .travis.yml`

```yaml
language: ruby
rvm:
  - 2.5.1
script:
  - bundle install
  - bundle exec jekyll build
after_success:
  - git config --global user.name "brave1984"
  - git config --global user.email $EMAIL
  - cd _site
  - git init
  - git checkout -b master
  - git remote add origin https://$DEPLOY_TOKEN@github.com/brave1984/brave1984.github.io.git
  - git add .
  - git commit -m "Travis CI - $(date)"
  - git push -f origin master
```

